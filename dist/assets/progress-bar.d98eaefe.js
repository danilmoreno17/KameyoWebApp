import{U as g,$ as n,a3 as ne,P as b,W as re,Z as d,a2 as l,I as p,K as se,a1 as h,D as u,ad as F,C as R,az as q,bq as O,a6 as P,aE as M,aa as D,b9 as G,b1 as E}from"./vendor.7710df40.js";import{ah as j,I as U,N as T,b as le,z as _,R as de,a2 as m,a as c,b6 as k,be as K,bl as Y}from"./index.3bbb47f2.js";var C={},ue="dx-trackbar",pe="dx-trackbar-container",he="dx-trackbar-range",_e="dx-trackbar-wrapper",X=j.inherit({_getDefaultOptions:function(){return g(this.callBase(),{min:0,max:100,value:0})},_initMarkup:function(){this.$element().addClass(ue),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),this.callBase()},_render:function(){this.callBase(),this._setRangeStyles(this._rangeStylesConfig())},_renderWrapper:function(){this._$wrapper=n("<div>").addClass(_e).appendTo(this.$element())},_renderContainer:function(){this._$bar=n("<div>").addClass(pe).appendTo(this._$wrapper)},_renderRange:function(){this._$range=n("<div>").addClass(he).appendTo(this._$bar)},_renderValue:function(){var o=this.option("value"),e=this.option("min"),t=this.option("max");if(!(e>t)){if(o<e){this.option("value",e),this._currentRatio=0;return}if(o>t){this.option("value",t),this._currentRatio=1;return}var a=e===t?0:(o-e)/(t-e);!this._needPreventAnimation&&this._setRangeStyles({width:100*a+"%"}),this.setAria({valuemin:this.option("min"),valuemax:t,valuenow:o}),this._currentRatio=a}},_rangeStylesConfig:function(){return{width:100*this._currentRatio+"%"}},_setRangeStyles:function(o){if(U.stop(this._$range),!o){this._$range.css({width:0});return}this._needPreventAnimation||!ne()||U.animate(this._$range,{type:"custom",duration:100,to:o})},_optionChanged:function(o){switch(o.name){case"value":this._renderValue(),this.callBase(o);break;case"max":case"min":this._renderValue();break;default:this.callBase(o)}},_dispose:function(){U.stop(this._$range),this.callBase()}});T("dxTrackBar",X);var ce="dx-progressbar",ve="dx-progressbar-container",ge="dx-progressbar-range-container",Se="dx-progressbar-range",fe="dx-progressbar-wrapper",Fe="dx-progressbar-status",me="dx-progressbar-animating-container",z="dx-progressbar-animating-segment",I=X.inherit({_getDefaultOptions:function(){return g(this.callBase(),{value:0,statusFormat:function(o){return"Progress: "+Math.round(100*o)+"%"},showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(o){return o.platform==="android"},options:{_animatingSegmentCount:2}}])},_initMarkup:function(){this._renderStatus(),this._createCompleteAction(),this.callBase(),this.$element().addClass(ce),this._$wrapper.addClass(fe),this._$bar.addClass(ve),this.setAria("role","progressbar"),n("<div>").addClass(ge).appendTo(this._$wrapper).append(this._$bar),this._$range.addClass(Se),this._toggleStatus(this.option("showStatus"))},_useTemplates:function(){return!1},_createCompleteAction:function(){this._completeAction=this._createActionByOption("onComplete")},_renderStatus:function(){this._$status=n("<div>").addClass(Fe)},_renderIndeterminateState:function(){this._$segmentContainer=n("<div>").addClass(me);for(var o=this.option("_animatingSegmentCount"),e=0;e<o;e++)n("<div>").addClass(z).addClass(z+"-"+(e+1)).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)},_toggleStatus:function(o){var e=this.option("statusPosition").split(" ");o?e[0]==="top"||e[0]==="left"?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()},_togglePositionClass:function(){var o=this.option("statusPosition"),e=o.split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");var t="dx-position-"+e[0];e[1]&&(t+="-"+e[1]),this._$wrapper.addClass(t)},_toggleIndeterminateState:function(o){o?(this._renderIndeterminateState(),this._$bar.toggle(!1)):(this._$bar.toggle(!0),this._$segmentContainer.remove(),delete this._$segmentContainer)},_renderValue:function(){var o=this.option("value"),e=this.option("max");if(!o&&o!==0){this._toggleIndeterminateState(!0);return}this._$segmentContainer&&this._toggleIndeterminateState(!1),o===e&&this._completeAction(),this.callBase(),this._setStatus()},_setStatus:function(){var o=this.option("statusFormat");b(o)?o=o.bind(this):o=function(t){return t};var e=o(this._currentRatio,this.option("value"));this._$status.text(e)},_dispose:function(){this._$status.remove(),this.callBase()},_optionChanged:function(o){switch(o.name){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(o.value);break;case"statusPosition":this._toggleStatus(this.option("showStatus"));break;case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:this.callBase(o)}}});T("dxProgressBar",I);var be=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"})),S=re(),Ee="dx-fileuploader",Ce="dx-fileuploader-empty",Ae="dx-fileuploader-show-file-list",N="dx-fileuploader-dragover",xe="dx-fileuploader-wrapper",Ue="dx-fileuploader-container",Le="dx-fileuploader-content",Be="dx-fileuploader-input-wrapper",Me="dx-fileuploader-input-container",De="dx-fileuploader-input-label",Te="dx-fileuploader-input",Ie="dx-fileuploader-files-container",w="dx-fileuploader-file-container",$e="dx-fileuploader-file-info",ye="dx-fileuploader-file-status-message",Re="dx-fileuploader-file",H="dx-fileuploader-file-name",V="dx-fileuploader-file-size",v="dx-fileuploader-button",L="dx-fileuploader-button-container",Oe="dx-fileuploader-cancel-button",Z="dx-fileuploader-upload-button",Pe="dx-fileuploader-invalid",W=400,ke="chunkMetadata",ze=()=>n("<input>").attr("type","file"),B=()=>!!S.FormData;class J extends j{_supportedKeys(){var e=t=>{t.preventDefault();var a=this._selectButton.$element();d.trigger(a,le)};return g(super._supportedKeys(),{space:e,enter:e})}_setOptionsByReference(){super._setOptionsByReference(),g(this._optionsByReference,{value:!0})}_getDefaultOptions(){return g(super._getDefaultOptions(),{chunkSize:0,value:[],selectButtonText:l.format("dxFileUploader-selectFile"),uploadButtonText:l.format("dxFileUploader-upload"),labelText:l.format("dxFileUploader-dropFile"),name:"files[]",multiple:!1,accept:"",uploadUrl:"/",allowCanceling:!0,showFileList:!0,progress:0,dialogTrigger:void 0,dropZone:void 0,readyToUploadMessage:l.format("dxFileUploader-readyToUpload"),uploadedMessage:l.format("dxFileUploader-uploaded"),uploadFailedMessage:l.format("dxFileUploader-uploadFailedMessage"),uploadAbortedMessage:l.format("dxFileUploader-uploadAbortedMessage"),uploadMode:"instantly",uploadMethod:"POST",uploadHeaders:{},uploadCustomData:{},onBeforeSend:null,onUploadStarted:null,onUploaded:null,onFilesUploaded:null,onProgress:null,onUploadError:null,onUploadAborted:null,onDropZoneEnter:null,onDropZoneLeave:null,allowedFileExtensions:[],maxFileSize:0,minFileSize:0,inputAttr:{},invalidFileExtensionMessage:l.format("dxFileUploader-invalidFileExtension"),invalidMaxFileSizeMessage:l.format("dxFileUploader-invalidMaxFileSize"),invalidMinFileSizeMessage:l.format("dxFileUploader-invalidMinFileSize"),extendSelection:!0,validationMessageMode:"always",uploadFile:null,uploadChunk:null,abortUpload:null,validationMessageOffset:{h:0,v:0},hoverStateEnabled:!0,useNativeInputClick:!1,useDragOver:!0,nativeDropSupported:!0,_uploadButtonType:"normal"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>_.real().deviceType==="desktop"&&!_.isSimulator(),options:{focusStateEnabled:!0}},{device:[{platform:"android"}],options:{validationMessageOffset:{v:0}}},{device:()=>_.real().deviceType!=="desktop",options:{useDragOver:!1}},{device:()=>!B(),options:{uploadMode:"useForm"}},{device:()=>_.real().deviceType!=="desktop",options:{nativeDropSupported:!1}},{device:()=>de(),options:{_uploadButtonType:"default"}}])}_initOptions(e){var t="labelText"in e;super._initOptions(e),!t&&!this._shouldDragOverBeRendered()&&this.option("labelText","")}_init(){super._init(),this._initFileInput(),this._initLabel(),this._setUploadStrategy(),this._createFiles(),this._createBeforeSendAction(),this._createUploadStartedAction(),this._createUploadedAction(),this._createFilesUploadedAction(),this._createProgressAction(),this._createUploadErrorAction(),this._createUploadAbortedAction(),this._createDropZoneEnterAction(),this._createDropZoneLeaveAction()}_setUploadStrategy(){var e=null;if(this.option("chunkSize")>0){var t=this.option("uploadChunk");e=t&&b(t)?new He(this):new we(this)}else{var a=this.option("uploadFile");e=a&&b(a)?new Ze(this):new Ve(this)}this._uploadStrategy=e}_initFileInput(){this._isCustomClickEvent=!1,this._$fileInput||(this._$fileInput=ze(),d.on(this._$fileInput,"change",this._inputChangeHandler.bind(this)),d.on(this._$fileInput,"click",e=>(e.stopPropagation(),this._resetInputValue(),this.option("useNativeInputClick")||this._isCustomClickEvent))),this._$fileInput.prop({multiple:this.option("multiple"),accept:this.option("accept"),tabIndex:-1})}_inputChangeHandler(){if(!this._doPreventInputChange){var e=this._$fileInput.val().replace(/^.*\\/,""),t=this._$fileInput.prop("files");if(!(t&&!t.length&&this.option("uploadMode")!=="useForm")){var a=t?this._getFiles(t):[{name:e}];this._changeValue(a),this.option("uploadMode")==="instantly"&&this._uploadFiles()}}}_shouldFileListBeExtended(){return this.option("uploadMode")!=="useForm"&&this.option("extendSelection")&&this.option("multiple")}_changeValue(e){var t=this._shouldFileListBeExtended()?this.option("value").slice():[];this.option("value",t.concat(e))}_getFiles(e){var t=[];return p(e,(a,i)=>t.push(i)),t}_getFile(e){var t=se(e)?this.option("value")[e]:e;return this._files.filter(a=>a.value===t)[0]}_initLabel(){this._$inputLabel||(this._$inputLabel=n("<div>")),this._updateInputLabelText()}_updateInputLabelText(){var e=this._isInteractionDisabled()?"":this.option("labelText");this._$inputLabel.text(e)}_focusTarget(){return this.$element().find("."+v)}_getSubmitElement(){return this._$fileInput}_initMarkup(){super._initMarkup(),this.$element().addClass(Ee),this._renderWrapper(),this._renderInputWrapper(),this._renderSelectButton(),this._renderInputContainer(),this._renderUploadButton(),this._preventRecreatingFiles=!0,this._activeDropZone=null}_render(){this._preventRecreatingFiles=!1,this._attachDragEventHandlers(this._$inputWrapper),this._attachDragEventHandlers(this.option("dropZone")),this._renderFiles(),super._render()}_createFileProgressBar(e){e.progressBar=this._createProgressBar(e.value.size),e.progressBar.$element().appendTo(e.$file),this._initStatusMessage(e),this._ensureCancelButtonInitialized(e)}_setStatusMessage(e,t){setTimeout(()=>{this.option("showFileList")&&e.$statusMessage&&(e.$statusMessage.text(t),e.$statusMessage.css("display",""),e.progressBar.$element().remove())},W)}_getUploadAbortedStatusMessage(){return this.option("uploadMode")==="instantly"?this.option("uploadAbortedMessage"):this.option("readyToUploadMessage")}_createFiles(){var e=this.option("value");this._files&&(e.length===0||!this._shouldFileListBeExtended())&&(this._preventFilesUploading(this._files),this._files=null),this._files||(this._files=[]),p(e.slice(this._files.length),(t,a)=>{var i=this._createFile(a);this._validateFile(i),this._files.push(i)})}_preventFilesUploading(e){e.forEach(t=>this._uploadStrategy.abortUpload(t))}_validateFile(e){e.isValidFileExtension=this._validateFileExtension(e),e.isValidMinSize=this._validateMinFileSize(e),e.isValidMaxSize=this._validateMaxFileSize(e)}_validateFileExtension(e){var t=this.option("allowedFileExtensions"),a=this.option("accept"),i=this._getAllowedFileTypes(a),r=e.value.name.substring(e.value.name.lastIndexOf(".")).toLowerCase();if(a.length!==0&&!this._isFileTypeAllowed(e.value,i))return!1;if(t.length===0)return!0;for(var s=0;s<t.length;s++)if(r===t[s].toLowerCase())return!0;return!1}_validateMaxFileSize(e){var t=e.value.size,a=this.option("maxFileSize");return a>0?t<=a:!0}_validateMinFileSize(e){var t=e.value.size,a=this.option("minFileSize");return a>0?t>=a:!0}_createBeforeSendAction(){this._beforeSendAction=this._createActionByOption("onBeforeSend",{excludeValidators:["readOnly"]})}_createUploadStartedAction(){this._uploadStartedAction=this._createActionByOption("onUploadStarted",{excludeValidators:["readOnly"]})}_createUploadedAction(){this._uploadedAction=this._createActionByOption("onUploaded",{excludeValidators:["readOnly"]})}_createFilesUploadedAction(){this._filesUploadedAction=this._createActionByOption("onFilesUploaded",{excludeValidators:["readOnly"]})}_createProgressAction(){this._progressAction=this._createActionByOption("onProgress",{excludeValidators:["readOnly"]})}_createUploadAbortedAction(){this._uploadAbortedAction=this._createActionByOption("onUploadAborted",{excludeValidators:["readOnly"]})}_createUploadErrorAction(){this._uploadErrorAction=this._createActionByOption("onUploadError",{excludeValidators:["readOnly"]})}_createDropZoneEnterAction(){this._dropZoneEnterAction=this._createActionByOption("onDropZoneEnter")}_createDropZoneLeaveAction(){this._dropZoneLeaveAction=this._createActionByOption("onDropZoneLeave")}_createFile(e){return{value:e,loadedSize:0,onProgress:h(),onAbort:h(),onLoad:h(),onError:h(),onLoadStart:h(),isValidFileExtension:!0,isValidMaxSize:!0,isValidMinSize:!0,isValid(){return this.isValidFileExtension&&this.isValidMaxSize&&this.isValidMinSize},isInitialized:!1}}_resetFileState(e){e.isAborted=!1,e.uploadStarted=!1,e.isStartLoad=!1,e.loadedSize=0,e.chunksData=void 0,e.request=void 0}_renderFiles(){var e,t=this.option("value");this._$filesContainer?(!this._shouldFileListBeExtended()||t.length===0)&&this._$filesContainer.empty():this._$filesContainer=n("<div>").addClass(Ie).appendTo(this._$content);var a=this.option("showFileList");a&&p(this._files,(i,r)=>{r.$file||this._renderFile(r)}),this.$element().toggleClass(Ae,a),this._toggleFileUploaderEmptyClassName(),this._updateFileNameMaxWidth(),(e=this._validationMessage)===null||e===void 0||e.repaint()}_renderFile(e){var t=e.value,a=n("<div>").addClass(w).appendTo(this._$filesContainer);this._renderFileButtons(e,a),e.$file=n("<div>").addClass(Re).appendTo(a);var i=n("<div>").addClass($e).appendTo(e.$file);e.$statusMessage=n("<div>").addClass(ye).appendTo(e.$file),n("<div>").addClass(H).text(t.name).appendTo(i),u(t.size)&&n("<div>").addClass(V).text(this._getFileSize(t.size)).appendTo(i),e.isValid()?e.$statusMessage.text(this.option("readyToUploadMessage")):(e.isValidFileExtension||e.$statusMessage.append(this._createValidationElement("invalidFileExtensionMessage")),e.isValidMaxSize||e.$statusMessage.append(this._createValidationElement("invalidMaxFileSizeMessage")),e.isValidMinSize||e.$statusMessage.append(this._createValidationElement("invalidMinFileSizeMessage")),a.addClass(Pe))}_createValidationElement(e){return n("<span>").text(this.option(e))}_updateFileNameMaxWidth(){var e=this.option("allowCanceling")&&this.option("uploadMode")!=="useForm"?1:0,t=this.option("uploadMode")==="useButtons"?1:0,a=F(this._$filesContainer.find("."+w).first())||F(this._$filesContainer),i=this._$filesContainer.find("."+L).eq(0),r=F(i)*(e+t),s=this._$filesContainer.find("."+V).eq(0),f=s.text();s.text("1000 Mb");var x=F(s);s.text(f),this._$filesContainer.find("."+H).css("maxWidth",a-r-x)}_renderFileButtons(e,t){var a=this._getCancelButton(e);a&&t.append(a);var i=this._getUploadButton(e);i&&t.append(i)}_getCancelButton(e){return this.option("uploadMode")==="useForm"?null:(e.cancelButton=this._createComponent(n("<div>").addClass(v+" "+Oe),m,{onClick:()=>this._removeFile(e),icon:"close",visible:this.option("allowCanceling"),disabled:this.option("readOnly"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")}),n("<div>").addClass(L).append(e.cancelButton.$element()))}_getUploadButton(e){return!e.isValid()||this.option("uploadMode")!=="useButtons"?null:(e.uploadButton=this._createComponent(n("<div>").addClass(v+" "+Z),m,{onClick:()=>this._uploadFile(e),icon:"upload",hoverStateEnabled:this.option("hoverStateEnabled")}),e.onLoadStart.add(()=>e.uploadButton.option({visible:!1,disabled:!0})),e.onAbort.add(()=>e.uploadButton.option({visible:!0,disabled:!1})),n("<div>").addClass(L).append(e.uploadButton.$element()))}_removeFile(e){var t;(t=e.$file)===null||t===void 0||t.parent().remove(),this._files.splice(R(e,this._files),1);var a=this.option("value").slice();a.splice(R(e.value,a),1),this._preventRecreatingFiles=!0,this.option("value",a),this._preventRecreatingFiles=!1,this._toggleFileUploaderEmptyClassName(),this._resetInputValue(!0)}removeFile(e){if(!(this.option("uploadMode")==="useForm"||!u(e))){var t=this._getFile(e);t&&(t.uploadStarted&&this._preventFilesUploading([t]),this._removeFile(t))}}_toggleFileUploaderEmptyClassName(){this.$element().toggleClass(Ce,!this._files.length||this._hasInvalidFile(this._files))}_hasInvalidFile(e){for(var t=0;t<e.length;t++)if(!e[t].isValid())return!0;return!1}_getFileSize(e){for(var t=0,a=[l.format("dxFileUploader-bytes"),l.format("dxFileUploader-kb"),l.format("dxFileUploader-Mb"),l.format("dxFileUploader-Gb")],i=a.length-1;t<i&&e>=1024;)e/=1024,t++;return Math.round(e)+" "+a[t]}_renderSelectButton(){var e=n("<div>").addClass(v).appendTo(this._$inputWrapper);this._selectButton=this._createComponent(e,m,{text:this.option("selectButtonText"),focusStateEnabled:!1,integrationOptions:{},disabled:this.option("readOnly"),hoverStateEnabled:this.option("hoverStateEnabled")}),this._selectFileDialogHandler=this._selectButtonClickHandler.bind(this),_.real().deviceType==="desktop"?this._selectButton.option("onClick",this._selectFileDialogHandler):this._attachSelectFileDialogHandler(this._selectButton.$element()),this._attachSelectFileDialogHandler(this.option("dialogTrigger"))}_selectButtonClickHandler(){if(!this.option("useNativeInputClick")){if(this._isInteractionDisabled())return!1;this._isCustomClickEvent=!0,d.trigger(this._$fileInput,"click"),this._isCustomClickEvent=!1}}_attachSelectFileDialogHandler(e){!u(e)||(this._detachSelectFileDialogHandler(e),d.on(n(e),"click",this._selectFileDialogHandler))}_detachSelectFileDialogHandler(e){!u(e)||d.off(n(e),"click",this._selectFileDialogHandler)}_renderUploadButton(){if(this.option("uploadMode")==="useButtons"){var e=n("<div>").addClass(v).addClass(Z).appendTo(this._$content);this._uploadButton=this._createComponent(e,m,{text:this.option("uploadButtonText"),onClick:this._uploadButtonClickHandler.bind(this),type:this.option("_uploadButtonType"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")})}}_uploadButtonClickHandler(){this._uploadFiles()}_shouldDragOverBeRendered(){return!this.option("readOnly")&&(this.option("uploadMode")!=="useForm"||this.option("nativeDropSupported"))}_isInteractionDisabled(){return this.option("readOnly")||this.option("disabled")}_renderInputContainer(){this._$inputContainer=n("<div>").addClass(Me).appendTo(this._$inputWrapper),this._$fileInput.addClass(Te),this._renderInput();var e="dx-fileuploader-input-label-".concat(new q);this._$inputLabel.attr("id",e).addClass(De).appendTo(this._$inputContainer),this.setAria("labelledby",e,this._$fileInput)}_renderInput(){this.option("useNativeInputClick")?this._selectButton.option("template",this._selectButtonInputTemplate.bind(this)):(this._$fileInput.appendTo(this._$inputContainer),this._selectButton.option("template","content")),this._applyInputAttributes(this.option("inputAttr"))}_selectButtonInputTemplate(e,t){var a=n(t),i=n("<span>").addClass("dx-button-text").text(e.text);return a.append(i).append(this._$fileInput),a}_renderInputWrapper(){this._$inputWrapper=n("<div>").addClass(Be).appendTo(this._$content)}_detachDragEventHandlers(e){!u(e)||d.off(n(e),c("",this.NAME))}_attachDragEventHandlers(e){var t=e!==this._$inputWrapper;!u(e)||!this._shouldDragOverBeRendered()||(this._detachDragEventHandlers(e),e=n(e),d.on(e,c("dragenter",this.NAME),this._dragEnterHandler.bind(this,t)),d.on(e,c("dragover",this.NAME),this._dragOverHandler.bind(this,t)),d.on(e,c("dragleave",this.NAME),this._dragLeaveHandler.bind(this,t)),d.on(e,c("drop",this.NAME),this._dropHandler.bind(this,t)))}_applyInputAttributes(e){this._$fileInput.attr(e)}_useInputForDrop(){return this.option("nativeDropSupported")&&this.option("uploadMode")==="useForm"}_getDropZoneElement(e,t){var a=e?Array.from(n(this.option("dropZone"))):[this._$inputWrapper];return a=a.map(i=>n(i).get(0)),a[a.indexOf(t.currentTarget)]}_dragEnterHandler(e,t){if(this.option("disabled"))return!1;this._useInputForDrop()||t.preventDefault();var a=this._getDropZoneElement(e,t);u(a)&&this._activeDropZone===null&&this.isMouseOverElement(t,a,!1)&&(this._activeDropZone=a,this._tryToggleDropZoneActive(!0,e,t))}_dragOverHandler(e,t){if(this._useInputForDrop()||t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy",!e){var a=this._getDropZoneElement(!1,t);this._activeDropZone===null&&this.isMouseOverElement(t,a,!1)&&this._dragEnterHandler(!1,t),this._activeDropZone!==null&&this._shouldRaiseDragLeave(t,!1)&&this._dragLeaveHandler(!1,t)}}_dragLeaveHandler(e,t){this._useInputForDrop()||t.preventDefault(),this._activeDropZone!==null&&this._shouldRaiseDragLeave(t,e)&&(this._tryToggleDropZoneActive(!1,e,t),this._activeDropZone=null)}_shouldRaiseDragLeave(e,t){return!this.isMouseOverElement(e,this._activeDropZone,!t)}_tryToggleDropZoneActive(e,t,a){var i=e?"addClass":"removeClass",r=e?"_dropZoneEnterAction":"_dropZoneLeaveAction";this[r]({event:a,dropZoneElement:this._activeDropZone}),t||this.$element()[i](N)}_dropHandler(e,t){if(this._activeDropZone=null,e||this.$element().removeClass(N),!(this._useInputForDrop()||e&&this._isInteractionDisabled())){t.preventDefault();var a=t.originalEvent.dataTransfer.files,i=this._getFiles(a);!this.option("multiple")&&i.length>1||(this._changeValue(i),this.option("uploadMode")==="instantly"&&this._uploadFiles())}}_handleAllFilesUploaded(){var e=this._files.every(t=>!t.isValid()||t._isError||t._isLoaded||t.isAborted);e&&this._filesUploadedAction()}_getAllowedFileTypes(e){return e.length?e.split(",").map(t=>t.trim()):[]}_isFileTypeAllowed(e,t){for(var a=0,i=t.length;a<i;a++){var r=t[a];if(r[0]==="."){if(r=r.replace(".","\\."),e.name.match(new RegExp(r+"$","i")))return!0}else if(r=r.replace(new RegExp("\\*","g"),""),e.type.match(new RegExp(r,"i")))return!0}return!1}_renderWrapper(){var e=n("<div>").addClass(xe).appendTo(this.$element()),t=n("<div>").addClass(Ue).appendTo(e);this._$content=n("<div>").addClass(Le).appendTo(t)}_clean(){this._$fileInput.detach(),delete this._$filesContainer,this._detachSelectFileDialogHandler(this.option("dialogTrigger")),this._detachDragEventHandlers(this.option("dropZone")),this._files&&this._files.forEach(e=>{e.$file=null,e.$statusMessage=null}),super._clean()}abortUpload(e){if(this.option("uploadMode")!=="useForm")if(u(e)){var t=this._getFile(e);t&&this._preventFilesUploading([t])}else this._preventFilesUploading(this._files)}upload(e){if(this.option("uploadMode")!=="useForm")if(u(e)){var t=this._getFile(e);t&&B()&&this._uploadFile(t)}else this._uploadFiles()}_uploadFiles(){B()&&p(this._files,(e,t)=>this._uploadFile(t))}_uploadFile(e){this._uploadStrategy.upload(e)}_updateProgressBar(e,t){e.progressBar&&e.progressBar.option({value:t.loaded,showStatus:!0}),this._progressAction({file:e.value,segmentSize:t.currentSegmentSize,bytesLoaded:t.loaded,bytesTotal:t.total,event:t.event,request:e.request})}_updateTotalProgress(e,t){var a=e?this._getProgressValue(t/e):0;this.option("progress",a),this._setLoadedSize(t)}_getProgressValue(e){return Math.floor(100*e)}_initStatusMessage(e){e.$statusMessage.css("display","none")}_ensureCancelButtonInitialized(e){if(!e.isInitialized){e.cancelButton.option("onClick",()=>{this._preventFilesUploading([e]),this._removeFile(e)});var t=()=>{setTimeout(()=>{e.cancelButton.option({visible:!1})},W)};e.onLoad.add(t),e.onError.add(t)}}_createProgressBar(e){return this._createComponent(n("<div>"),I,{value:void 0,min:0,max:e,statusFormat:t=>this._getProgressValue(t)+"%",showStatus:!1,statusPosition:"right"})}_getTotalFilesSize(){return this._totalFilesSize||(this._totalFilesSize=0,p(this._files,(e,t)=>{this._totalFilesSize+=t.value.size})),this._totalFilesSize}_getTotalLoadedFilesSize(){return this._totalLoadedFilesSize||(this._totalLoadedFilesSize=0,p(this._files,(e,t)=>{this._totalLoadedFilesSize+=t.loadedSize})),this._totalLoadedFilesSize}_setLoadedSize(e){this._totalLoadedFilesSize=e}_recalculateProgress(){this._totalFilesSize=0,this._totalLoadedFilesSize=0,this._updateTotalProgress(this._getTotalFilesSize(),this._getTotalLoadedFilesSize())}isMouseOverElement(e,t,a){if(!t)return!1;var i=a?parseFloat(S.getComputedStyle(t,":before").height):0,r=a?parseFloat(S.getComputedStyle(t,":after").height):0,s=O(t).left,f=O(t).top+i,x=t.offsetWidth,oe=t.offsetHeight-i-r,$=this._getEventX(e),y=this._getEventY(e);return $>=s&&$<s+x&&y>=f&&y<f+oe}_getEventX(e){return k(e)?this._getTouchEventX(e):e.clientX+this._getDocumentScrollLeft()}_getEventY(e){return k(e)?this._getTouchEventY(e):e.clientY+this._getDocumentScrollTop()}_getTouchEventX(e){var t=null;return e.changedTouches.length>0?t=e.changedTouches:e.targetTouches.length>0&&(t=e.targetTouches),t?t[0].pageX:0}_getTouchEventY(e){var t=null;return e.changedTouches.length>0?t=e.changedTouches:e.targetTouches.length>0&&(t=e.targetTouches),t?t[0].pageY:0}_getDocumentScrollTop(){var e=P.getDocument();return e.documentElement.scrollTop||e.body.scrollTop}_getDocumentScrollLeft(){var e=P.getDocument();return e.documentElement.scrollLeft||e.body.scrollLeft}_updateReadOnlyState(){var e=this.option("readOnly");this._selectButton.option("disabled",e),this._files.forEach(t=>{var a;return(a=t.cancelButton)===null||a===void 0?void 0:a.option("disabled",e)}),this._updateInputLabelText(),this._attachDragEventHandlers(this._$inputWrapper)}_updateHoverState(){var e,t,a=this.option("hoverStateEnabled");(e=this._selectButton)===null||e===void 0||e.option("hoverStateEnabled",a),(t=this._uploadButton)===null||t===void 0||t.option("hoverStateEnabled",a),this._files.forEach(i=>{var r,s;(r=i.uploadButton)===null||r===void 0||r.option("hoverStateEnabled",a),(s=i.cancelButton)===null||s===void 0||s.option("hoverStateEnabled",a)})}_optionChanged(e){var{name:t,value:a,previousValue:i}=e;switch(t){case"height":case"width":this._updateFileNameMaxWidth(),super._optionChanged(e);break;case"value":!a.length&&this._$fileInput.val(""),this._preventRecreatingFiles||(this._createFiles(),this._renderFiles()),this._recalculateProgress(),super._optionChanged(e);break;case"name":this._initFileInput(),super._optionChanged(e);break;case"accept":this._initFileInput();break;case"multiple":this._initFileInput(),e.value||this.reset();break;case"readOnly":this._updateReadOnlyState(),super._optionChanged(e);break;case"selectButtonText":this._selectButton.option("text",a);break;case"uploadButtonText":this._uploadButton&&this._uploadButton.option("text",a);break;case"_uploadButtonType":this._uploadButton&&this._uploadButton.option("type",a);break;case"dialogTrigger":this._detachSelectFileDialogHandler(i),this._attachSelectFileDialogHandler(a);break;case"dropZone":this._detachDragEventHandlers(i),this._attachDragEventHandlers(a);break;case"maxFileSize":case"minFileSize":case"allowedFileExtensions":case"invalidFileExtensionMessage":case"invalidMaxFileSizeMessage":case"invalidMinFileSizeMessage":case"readyToUploadMessage":case"uploadedMessage":case"uploadFailedMessage":case"uploadAbortedMessage":this._invalidate();break;case"labelText":this._updateInputLabelText();break;case"showFileList":this._preventRecreatingFiles||this._renderFiles();break;case"uploadFile":case"uploadChunk":case"chunkSize":this._setUploadStrategy();break;case"abortUpload":case"uploadUrl":case"progress":case"uploadMethod":case"uploadHeaders":case"uploadCustomData":case"extendSelection":break;case"hoverStateEnabled":this._updateHoverState(),super._optionChanged(e);break;case"allowCanceling":case"uploadMode":this.reset(),this._invalidate();break;case"onBeforeSend":this._createBeforeSendAction();break;case"onUploadStarted":this._createUploadStartedAction();break;case"onUploaded":this._createUploadedAction();break;case"onFilesUploaded":this._createFilesUploadedAction();break;case"onProgress":this._createProgressAction();break;case"onUploadError":this._createUploadErrorAction();break;case"onUploadAborted":this._createUploadAbortedAction();break;case"onDropZoneEnter":this._createDropZoneEnterAction();break;case"onDropZoneLeave":this._createDropZoneLeaveAction();break;case"useNativeInputClick":this._renderInput();break;case"useDragOver":this._attachDragEventHandlers(this._$inputWrapper);break;case"nativeDropSupported":this._invalidate();break;case"inputAttr":this._applyInputAttributes(this.option(t));break;default:super._optionChanged(e)}}_resetInputValue(e){this.option("uploadMode")==="useForm"&&!e||(this._doPreventInputChange=!0,this._$fileInput.val(""),this._doPreventInputChange=!1)}reset(){this.option("value",[])}}class Ne{constructor(e,t){this.file=e,this.chunkSize=t,this.index=0}read(){if(!this.file)return null;var e=this.createBlobResult(this.file,this.index,this.chunkSize);return e.isCompleted&&(this.file=null),this.index++,e}createBlobResult(e,t,a){var i=t*a;return{blob:this.sliceFile(e,i,a),index:t,isCompleted:i+a>=e.size}}sliceFile(e,t,a){return e.slice?e.slice(t,t+a):e.webkitSlice?e.webkitSlice(t,t+a):null}}class Q{constructor(e){this.fileUploader=e}upload(e){e.isInitialized&&e.isAborted&&this.fileUploader._resetFileState(e),e.isValid()&&!e.uploadStarted&&(this._prepareFileBeforeUpload(e),this._uploadCore(e))}abortUpload(e){if(!(e._isError||e._isLoaded||e.isAborted||!e.uploadStarted)&&(e.isAborted=!0,e.request&&e.request.abort(),this._isCustomCallback("abortUpload"))){var t=this.fileUploader.option("abortUpload"),a=this._createUploadArgument(e),i=null;try{var r=t(e.value,a);i=M(r)}catch(s){i=new D().reject(s).promise()}i.done(()=>e.onAbort.fire()).fail(s=>this._handleFileError(e,s))}}_beforeSend(e,t){var a=this._createUploadArgument(t);this.fileUploader._beforeSendAction({request:e,file:t.value,uploadInfo:a}),t.request=e}_createUploadArgument(e){}_uploadCore(e){}_isCustomCallback(e){var t=this.fileUploader.option(e);return t&&b(t)}_handleProgress(e,t){e._isError||(e._isProgressStarted=!0,this._handleProgressCore(e,t))}_handleProgressCore(e,t){}_handleFileError(e,t){e._isError=!0,e.onError.fire(t)}_prepareFileBeforeUpload(e){if(e.$file){var t;(t=e.progressBar)===null||t===void 0||t.dispose(),this.fileUploader._createFileProgressBar(e)}e.isInitialized||(e.onLoadStart.add(this._onUploadStarted.bind(this,e)),e.onLoad.add(this._onLoadedHandler.bind(this,e)),e.onError.add(this._onErrorHandler.bind(this,e)),e.onAbort.add(this._onAbortHandler.bind(this,e)),e.onProgress.add(this._onProgressHandler.bind(this,e)),e.isInitialized=!0)}_shouldHandleError(e,t){return(this._isStatusError(t.status)||!e._isProgressStarted)&&!e.isAborted}_isStatusError(e){return 400<=e&&e<500||500<=e&&e<600}_onUploadStarted(e,t){e.uploadStarted=!0,this.fileUploader._uploadStartedAction({file:e.value,event:t,request:e.request})}_onAbortHandler(e,t){var a={file:e.value,event:t,request:e.request,message:this.fileUploader._getUploadAbortedStatusMessage()};this.fileUploader._uploadAbortedAction(a),this.fileUploader._setStatusMessage(e,a.message),this.fileUploader._handleAllFilesUploaded()}_onErrorHandler(e,t){var a={file:e.value,event:void 0,request:e.request,error:t,message:this.fileUploader.option("uploadFailedMessage")};this.fileUploader._uploadErrorAction(a),this.fileUploader._setStatusMessage(e,a.message),this.fileUploader._handleAllFilesUploaded()}_onLoadedHandler(e,t){var a={file:e.value,event:t,request:e.request,message:this.fileUploader.option("uploadedMessage")};e._isLoaded=!0,this.fileUploader._uploadedAction(a),this.fileUploader._setStatusMessage(e,a.message),this.fileUploader._handleAllFilesUploaded()}_onProgressHandler(e,t){if(e){var a=this.fileUploader._getTotalFilesSize(),i=this.fileUploader._getTotalLoadedFilesSize(),r=Math.min(t.loaded,e.value.size),s=r-e.loadedSize;e.loadedSize=r,this.fileUploader._updateTotalProgress(a,i+s),this.fileUploader._updateProgressBar(e,this._getLoadedData(r,t.total,s,t))}}_getLoadedData(e,t,a,i){return{loaded:e,total:t,currentSegmentSize:a}}_extendFormData(e){var t=this.fileUploader.option("uploadCustomData");for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&u(t[a])&&e.append(a,t[a])}}class ee extends Q{constructor(e){super(e);this.chunkSize=this.fileUploader.option("chunkSize")}_uploadCore(e){var t=e.value,a={name:t.name,loadedBytes:0,type:t.type,blobReader:new Ne(t,this.chunkSize),guid:new q,fileSize:t.size,count:Math.ceil(t.size/this.chunkSize),customData:{}};e.chunksData=a,this._sendChunk(e,a)}_sendChunk(e,t){var a=t.blobReader.read();t.currentChunk=a,a&&this._sendChunkCore(e,t,a).done(()=>{e.isAborted||(t.loadedBytes+=a.blob.size,e.onProgress.fire({loaded:t.loadedBytes,total:e.value.size}),a.isCompleted&&e.onLoad.fire(),setTimeout(()=>this._sendChunk(e,t)))}).fail(i=>{this._shouldHandleError(e,i)&&this._handleFileError(e,i)})}_sendChunkCore(e,t,a){}_tryRaiseStartLoad(e){e.isStartLoad||(e.isStartLoad=!0,e.onLoadStart.fire())}_getEvent(e){return null}_createUploadArgument(e){return this._createChunksInfo(e.chunksData)}_createChunksInfo(e){return{bytesUploaded:e.loadedBytes,chunkCount:e.count,customData:e.customData,chunkBlob:e.currentChunk.blob,chunkIndex:e.currentChunk.index}}}class we extends ee{_sendChunkCore(e,t,a){return K.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:i=>this._beforeSend(i,e),upload:{onprogress:i=>this._handleProgress(e,i),onloadstart:()=>this._tryRaiseStartLoad(e),onabort:()=>e.onAbort.fire()},data:this._createFormData({fileName:t.name,blobName:this.fileUploader.option("name"),blob:a.blob,index:a.index,count:t.count,type:t.type,guid:t.guid,size:t.fileSize})})}_createFormData(e){var t=new S.FormData;return t.append(e.blobName,e.blob),t.append(ke,JSON.stringify({FileName:e.fileName,Index:e.index,TotalCount:e.count,FileSize:e.size,FileType:e.type,FileGuid:e.guid})),this._extendFormData(t),t}}class He extends ee{_sendChunkCore(e,t){this._tryRaiseStartLoad(e);var a=this._createChunksInfo(t),i=this.fileUploader.option("uploadChunk");try{var r=i(e.value,a);return M(r)}catch(s){return new D().reject(s).promise()}}_shouldHandleError(e,t){return!0}}class te extends Q{_uploadCore(e){e.loadedSize=0,this._uploadFile(e).done(()=>{e.isAborted||e.onLoad.fire()}).fail(t=>{this._shouldHandleError(e,t)&&this._handleFileError(e,t)})}_uploadFile(e){}_handleProgressCore(e,t){e.onProgress.fire(t)}_getLoadedData(e,t,a,i){var r=super._getLoadedData(e,t,a,i);return r.event=i,r}}class Ve extends te{_uploadFile(e){return K.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:t=>this._beforeSend(t,e),upload:{onprogress:t=>this._handleProgress(e,t),onloadstart:()=>e.onLoadStart.fire(),onabort:()=>e.onAbort.fire()},data:this._createFormData(this.fileUploader.option("name"),e.value)})}_createFormData(e,t){var a=new S.FormData;return a.append(e,t,t.name),this._extendFormData(a),a}}class Ze extends te{_uploadFile(e){e.onLoadStart.fire();var t=this.fileUploader.option("uploadFile");try{var a=t(e.value,i=>{var r={loaded:i,total:e.size};this._handleProgress(e,r)});return M(a)}catch(i){return new D().reject(i).promise()}}_shouldHandleError(e,t){return!0}}T("dxFileUploader",J);var We=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),qe=G(We);/*!
 * devextreme-vue
 * Version: 21.2.6
 * Build date: Tue Mar 01 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var Ge=E&&E.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(C,"__esModule",{value:!0});var je=C.DxFileUploader=void 0,Ke=Ge(qe),Ye=Y,ae=Ye.createComponent({props:{abortUpload:Function,accept:String,accessKey:String,activeStateEnabled:Boolean,allowCanceling:Boolean,allowedFileExtensions:Array,chunkSize:Number,dialogTrigger:{},disabled:Boolean,dropZone:{},elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},invalidFileExtensionMessage:String,invalidMaxFileSizeMessage:String,invalidMinFileSizeMessage:String,isValid:Boolean,labelText:String,maxFileSize:Number,minFileSize:Number,multiple:Boolean,name:String,onBeforeSend:Function,onContentReady:Function,onDisposing:Function,onDropZoneEnter:Function,onDropZoneLeave:Function,onFilesUploaded:Function,onInitialized:Function,onOptionChanged:Function,onProgress:Function,onUploadAborted:Function,onUploaded:Function,onUploadError:Function,onUploadStarted:Function,onValueChanged:Function,progress:Number,readOnly:Boolean,readyToUploadMessage:String,rtlEnabled:Boolean,selectButtonText:String,showFileList:Boolean,tabIndex:Number,uploadAbortedMessage:String,uploadButtonText:String,uploadChunk:Function,uploadCustomData:{},uploadedMessage:String,uploadFailedMessage:String,uploadFile:Function,uploadHeaders:{},uploadMethod:String,uploadMode:String,uploadUrl:String,validationError:{},validationErrors:Array,validationStatus:String,value:Array,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:abortUpload":null,"update:accept":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowCanceling":null,"update:allowedFileExtensions":null,"update:chunkSize":null,"update:dialogTrigger":null,"update:disabled":null,"update:dropZone":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:invalidFileExtensionMessage":null,"update:invalidMaxFileSizeMessage":null,"update:invalidMinFileSizeMessage":null,"update:isValid":null,"update:labelText":null,"update:maxFileSize":null,"update:minFileSize":null,"update:multiple":null,"update:name":null,"update:onBeforeSend":null,"update:onContentReady":null,"update:onDisposing":null,"update:onDropZoneEnter":null,"update:onDropZoneLeave":null,"update:onFilesUploaded":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onProgress":null,"update:onUploadAborted":null,"update:onUploaded":null,"update:onUploadError":null,"update:onUploadStarted":null,"update:onValueChanged":null,"update:progress":null,"update:readOnly":null,"update:readyToUploadMessage":null,"update:rtlEnabled":null,"update:selectButtonText":null,"update:showFileList":null,"update:tabIndex":null,"update:uploadAbortedMessage":null,"update:uploadButtonText":null,"update:uploadChunk":null,"update:uploadCustomData":null,"update:uploadedMessage":null,"update:uploadFailedMessage":null,"update:uploadFile":null,"update:uploadHeaders":null,"update:uploadMethod":null,"update:uploadMode":null,"update:uploadUrl":null,"update:validationError":null,"update:validationErrors":null,"update:validationStatus":null,"update:value":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=Ke.default,this.$_hasAsyncTemplate=!0}});je=C.DxFileUploader=ae;var ot=C.default=ae,A={},Xe=G(be);/*!
 * devextreme-vue
 * Version: 21.2.6
 * Build date: Tue Mar 01 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var Je=E&&E.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(A,"__esModule",{value:!0});var Qe=A.DxProgressBar=void 0,et=Je(Xe),tt=Y,ie=tt.createComponent({props:{disabled:Boolean,elementAttr:Object,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,isValid:Boolean,max:Number,min:Number,onComplete:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,readOnly:Boolean,rtlEnabled:Boolean,showStatus:Boolean,statusFormat:[Function,String],validationError:{},validationErrors:Array,validationMessageMode:String,validationStatus:String,value:{},visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:elementAttr":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:isValid":null,"update:max":null,"update:min":null,"update:onComplete":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:readOnly":null,"update:rtlEnabled":null,"update:showStatus":null,"update:statusFormat":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationStatus":null,"update:value":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=et.default,this.$_hasAsyncTemplate=!0}});Qe=A.DxProgressBar=ie;var nt=A.default=ie;export{je as D,Qe as a};
