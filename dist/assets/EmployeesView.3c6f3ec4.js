import{D as T,a as M,b as L,c as O,d as B,e as H,k as q,f as V,s as j,g as W,h as z,i as U,j as Y,n as J,t as K,u as Q,v as X,l as Z}from"./data-grid.24b081de.js";import{B as $}from"./BreadCrumb.9367f10a.js";import{D as ee}from"./form.181df029.js";import{C as te}from"./index.3bbb47f2.js";import{c as ae}from"./CellLinkTemplate.75b044c2.js";import{e as oe,F as ne}from"./FileSaver.min.34d9f25a.js";import{e as ie}from"./excel_exporter.6e076f26.js";import{R as m}from"./RepositoryFactory.1ead146f.js";import{r as a,o as re,a as le,c as u,f as e,w as i}from"./vendor.7710df40.js";import{_ as se}from"./index.7b655b97.js";const c=m.get("catalogs"),de=m.get("subsidiaries"),p=m.get("employees");function ce(t){return t!=null&&t!==""}const pe={name:"EmployeeView",components:{DxDataGrid:T,DxColumn:M,DxScrolling:L,DxPager:O,DxPaging:B,DxEditing:H,DxHeaderFilter:q,DxRequiredRule:V,DxPatternRule:j,DxPopup:W,DxLookup:z,DxFilterRow:U,DxForm:Y,DxItem:ee,BreadCrumb:$,DxExport:J,DxSelection:K,DxGroupPanel:Q,DxGrouping:X,DxSearchPanel:Z,cellLink:ae},data(){return{dataSource:new te({key:"id",load:t=>{let o={};return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach(s=>{s in t&&ce(t[s])&&(o[s]=JSON.stringify(t[s]))}),this.getEmployees(o)},insert:t=>this.createEmployee(t),update:(t,o)=>(o.id=t,this.updateEmployee(o)),remove:t=>this.deleteEmployee(t)}),area:{},department:{},costcenter:{},position:{},currency:{},employeeType:{},subsidiary:{},jefe:{},pattern:/^\(\d{3}\) \d{3}-\d{4}$/i}},methods:{getCatalogs:async function(t,o){const{data:s}=await catalogRepository.Get(t,o);return s.data},onExporting(t){const o=new oe.exports.Workbook,s=o.addWorksheet("Empleados");ie({component:t.component,worksheet:s,autoFilterEnabled:!0}).then(()=>{o.xlsx.writeBuffer().then(x=>{ne.exports.saveAs(new Blob([x],{type:"application/octet-stream"}),"Empleados.xlsx")})}),t.cancel=!0},getEmployees:async function(t){const{data:o}=await p.GetWithFilter(t);return o.data},createEmployee:async function(t){const{data:o}=await p.Create(t);return o},updateEmployee:async function(t){const{data:o}=await p.Update(t);return o},deleteEmployee:async function(t){const{data:o}=await p.Delete(t);return o},getAreas:async function(){const{data:t}=await c.Get("NAME","AREA");this.area=t.data},getDepartments:async function(){const{data:t}=await c.Get("NAME","DEPARTMEN");this.department=t.data},getPositions:async function(){const{data:t}=await c.Get("NAME","POSITION");this.position=t.data},getCurrencies:async function(){const{data:t}=await c.Get("NAME","CURRENCY");this.currency=t.data},getCostCenters:async function(){const{data:t}=await c.Get("NAME","COSTCENTER");this.costcenter=t.data},getEmployeeTypes:async function(){const{data:t}=await c.Get("NAME","EMPLOYEETYPE");this.employeeType=t.data},getSubsidiaries:async function(){const{data:t}=await de.GetWithPagination({});this.subsidiary=t.data},getParentEmployees:async function(){const{data:t}=await p.Get("PARENTID","NULL");this.jefe=t.data}},async created(){await this.getAreas(),await this.getDepartments(),await this.getPositions(),await this.getCurrencies(),await this.getCostCenters(),await this.getEmployeeTypes(),await this.getSubsidiaries(),await this.getParentEmployees()}},ue={id:"main-content"},me={class:"container-fluid"},xe={class:"block-header"},fe={class:"row clearfix"},_e={class:"col-md-12"};function De(t,o,s,x,l,y){const g=a("bread-crumb"),h=a("DxHeaderFilter"),w=a("DxGroupPanel"),E=a("DxGrouping"),P=a("DxExport"),b=a("DxSelection"),v=a("DxSearchPanel"),C=a("DxFilterRow"),R=a("DxScrolling"),G=a("DxPaging"),I=a("DxPager"),S=a("DxPopup"),n=a("DxItem"),k=a("DxForm"),F=a("DxEditing"),f=a("DxRequiredRule"),r=a("DxColumn"),d=a("DxLookup"),_=a("DxPatternRule"),N=a("cellLink"),A=a("DxDataGrid");return re(),le("div",ue,[u("div",me,[u("div",xe,[e(g)]),u("div",fe,[u("div",_e,[e(A,{id:"dataGridEmployee","data-source":l.dataSource,"show-borders":!0,"repaint-changes-only":!0,"remote-operations":!0,"key-expr":"id",onExporting:y.onExporting},{"cell-link-template":i(({data:D})=>[e(N,{"cell-data":D,routePath:{name:"employeeView",params:{id:D.data.id}}},null,8,["cell-data","routePath"])]),default:i(()=>[e(h,{visible:!0}),e(w,{visible:!0}),e(E,{"auto-expand-all":!0}),e(P,{enabled:!0,"allow-export-selected-data":!0}),e(b,{mode:"multiple"}),e(v,{visible:!0,width:240,placeholder:"Search..."}),e(C,{visible:!0}),e(R,{"row-rendering-mode":"virtual"}),e(G,{"page-size":10}),e(I,{visible:!0,"allowed-page-sizes":[10,20,50],"display-mode":t.displayMode,"show-page-size-selector":!0,"show-info":!1,"show-navigation-buttons":!0},null,8,["display-mode"]),e(F,{"refresh-mode":t.full,"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,mode:"popup"},{default:i(()=>[e(S,{"show-title":!0,width:700,height:525,title:"Employee Info"}),e(k,null,{default:i(()=>[e(n,{"col-count":2,"col-span":2,"item-type":"group"},{default:i(()=>[e(n,{"data-field":"names"}),e(n,{"data-field":"lastName"}),e(n,{"data-field":"parentId"}),e(n,{"data-field":"subsidiaryId"}),e(n,{"data-field":"catalogEmployeeTypeId"}),e(n,{"data-field":"catalogPositionId"}),e(n,{"data-field":"catalogAreaId"}),e(n,{"data-field":"catalogDepartmentId"}),e(n,{"data-field":"catalogCostCenterId"}),e(n,{"data-field":"catalogCurrencyId"}),e(n,{"data-field":"costHour"}),e(n,{"data-field":"phoneOffice"}),e(n,{"data-field":"phoneOfficeExt"}),e(n,{"data-field":"phoneMobile"}),e(n,{"data-field":"calculateFactor"})]),_:1})]),_:1})]),_:1},8,["refresh-mode"]),e(r,{width:150,"data-field":"names",caption:"Nombres","cell-template":"cell-link-template"},{default:i(()=>[e(f)]),_:1}),e(r,{width:150,"data-field":"lastName",caption:"Apellidos"}),e(r,{width:150,"data-field":"parentId",caption:"Jefe"},{default:i(()=>[e(d,{"data-source":l.jefe,"value-expr":"id","display-expr":"names"},null,8,["data-source"])]),_:1}),e(r,{width:150,"data-field":"subsidiaryId",caption:"Filial"},{default:i(()=>[e(f),e(d,{"data-source":l.subsidiary,"value-expr":"id","display-expr":"name"},null,8,["data-source"])]),_:1}),e(r,{width:150,"data-field":"catalogAreaId",caption:"Area"},{default:i(()=>[e(d,{"data-source":l.area,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),e(r,{width:0,"data-field":"catalogDepartmentId",caption:"Departamento"},{default:i(()=>[e(d,{"data-source":l.department,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),e(r,{width:0,"data-field":"catalogCostCenterId",caption:"Centro de Costo"},{default:i(()=>[e(d,{"data-source":l.costcenter,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),e(r,{width:150,"data-field":"catalogPositionId",caption:"Posicion"},{default:i(()=>[e(d,{"data-source":l.position,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),e(r,{width:0,"data-field":"catalogCurrencyId",caption:"Moneda"},{default:i(()=>[e(d,{"data-source":l.currency,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),e(r,{width:150,"data-field":"catalogEmployeeTypeId",caption:"Tipo Empleado"},{default:i(()=>[e(d,{"data-source":l.employeeType,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),e(r,{width:0,"data-field":"costHour","data-type":"number",format:"currency",caption:"Costo Hora"}),e(r,{width:0,"data-field":"phoneOffice","data-type":"tel",caption:"Telefono Oficina"},{default:i(()=>[e(_,{pattern:l.pattern,message:'El n\xFAmero de telefono debe tener el siguiente formato:  "(555) 555-5555" !'},null,8,["pattern"])]),_:1}),e(r,{width:0,"data-field":"phoneOfficeExt","data-type":"number",caption:"Ext."}),e(r,{width:0,"data-field":"phoneMobile","data-type":"tel",caption:"Movil"},{default:i(()=>[e(_,{pattern:l.pattern,message:'El n\xFAmero de telefono debe tener el siguiente formato:  "(555) 555-5555" !'},null,8,["pattern"])]),_:1}),e(r,{width:0,"data-field":"calculateFactor","data-type":"number",caption:"Factor de Calculo"})]),_:1},8,["data-source","onExporting"])])])])])}var Ge=se(pe,[["render",De]]);export{Ge as default};
