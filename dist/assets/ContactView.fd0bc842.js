import{D as I,a as M,b as B,f as q,k as L,c as j,i as O,d as T,e as V,r as H,g as W,h as z,j as J,l as U,s as K,n as Q,t as X,u as Y,v as Z}from"./data-grid.24b081de.js";import{B as $}from"./BreadCrumb.9367f10a.js";import{D as tt}from"./form.181df029.js";import{C as et}from"./index.3bbb47f2.js";import{e as at,F as ot}from"./FileSaver.min.34d9f25a.js";import{e as nt}from"./excel_exporter.6e076f26.js";import{R as m}from"./RepositoryFactory.1ead146f.js";import{r as a,o as it,a as rt,c as u,f as t,w as n}from"./vendor.7710df40.js";import{_ as st}from"./index.7b655b97.js";const x=m.get("catalogs"),c=m.get("contacts"),lt=m.get("customers");function dt(e){return e!=null&&e!==""}const ct={name:"ContactView",components:{DxDataGrid:I,DxColumn:M,DxScrolling:B,DxRequiredRule:q,DxHeaderFilter:L,DxPager:j,DxFilterRow:O,DxPaging:T,DxEditing:V,DxEmailRule:H,DxPopup:W,DxLookup:z,DxForm:J,DxItem:tt,DxSearchPanel:U,BreadCrumb:$,DxPatternRule:K,DxExport:Q,DxSelection:X,DxGroupPanel:Y,DxGrouping:Z},data(){return{dataSource:new et({key:"id",load:e=>{let o={};return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach(l=>{l in e&&dt(e[l])&&(o[l]=JSON.stringify(e[l]))}),this.getContacts(o)},insert:e=>this.createContact(e),update:(e,o)=>(o.id=e,this.updateContact(o)),remove:e=>this.deleteContact(e)}),cliente:{},jefe:{},area:{},department:{},position:{},pattern:/^\(\d{3}\) \d{3}-\d{4}$/i}},methods:{onExporting(e){const o=new at.exports.Workbook,l=o.addWorksheet("Contactos");nt({component:e.component,worksheet:l,autoFilterEnabled:!0}).then(()=>{o.xlsx.writeBuffer().then(_=>{ot.exports.saveAs(new Blob([_],{type:"application/octet-stream"}),"Contactos.xlsx")})}),e.cancel=!0},getContacts:async function(e){const{data:o}=await c.GetWithFilter(e);return o.data},createContact:async function(e){const{data:o}=await c.Create(e);return o},updateContact:async function(e){const{data:o}=await c.Update(e);return o},deleteContact:async function(e){const{data:o}=await c.Delete(e);return o},getClients:async function(){const{data:e}=await lt.GetWithPagination({});this.cliente=e.data},getParentContacts:async function(){const{data:e}=await c.Get("PARENTID","NULL");this.jefe=e.data},getAreas:async function(){const{data:e}=await x.Get("NAME","AREA");this.area=e.data},getDepartments:async function(){const{data:e}=await x.Get("NAME","DEPARTMEN");this.department=e.data},getPositions:async function(){const{data:e}=await x.Get("NAME","POSITION");this.position=e.data}},async created(){await this.getClients(),await this.getParentContacts(),await this.getAreas(),await this.getDepartments(),await this.getPositions()}},pt={id:"main-content"},ut={class:"container-fluid"},xt={class:"block-header"},mt={class:"row clearfix"},_t={class:"col-md-12"};function Dt(e,o,l,_,s,f){const g=a("bread-crumb"),h=a("DxHeaderFilter"),w=a("DxGroupPanel"),y=a("DxGrouping"),C=a("DxExport"),E=a("DxSelection"),P=a("DxSearchPanel"),R=a("DxFilterRow"),v=a("DxScrolling"),b=a("DxPaging"),G=a("DxPager"),S=a("DxPopup"),i=a("DxItem"),k=a("DxForm"),F=a("DxEditing"),d=a("DxLookup"),r=a("DxColumn"),p=a("DxRequiredRule"),N=a("DxEmailRule"),D=a("DxPatternRule"),A=a("DxDataGrid");return it(),rt("div",pt,[u("div",ut,[u("div",xt,[t(g)]),u("div",mt,[u("div",_t,[t(A,{id:"dataGridContacts","data-source":s.dataSource,"show-borders":!0,"key-expr":"id",onExporting:f.onExporting},{default:n(()=>[t(h,{visible:!0}),t(w,{visible:!0}),t(y,{"auto-expand-all":!0}),t(C,{enabled:!0,"allow-export-selected-data":!0}),t(E,{mode:"multiple"}),t(P,{visible:!0,width:240,placeholder:"Search..."}),t(R,{visible:!0}),t(v,{"row-rendering-mode":"virtual"}),t(b,{"page-size":10}),t(G,{visible:!0,"allowed-page-sizes":[10,20,50],"display-mode":e.displayMode,"show-page-size-selector":!0,"show-info":!1,"show-navigation-buttons":!0},null,8,["display-mode"]),t(F,{"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,mode:"popup"},{default:n(()=>[t(S,{"show-title":!0,width:700,height:525,title:"Contact Info"}),t(k,null,{default:n(()=>[t(i,{"col-count":2,"col-span":2,"item-type":"group"},{default:n(()=>[t(i,{"data-field":"parentId"}),t(i,{"data-field":"customerId"}),t(i,{"data-field":"names"}),t(i,{"data-field":"lastName"}),t(i,{"data-field":"area"}),t(i,{"data-field":"department"}),t(i,{"data-field":"position"}),t(i,{"data-field":"email"}),t(i,{"data-field":"phoneOffice"}),t(i,{"data-field":"phoneOfficeExt"}),t(i,{"data-field":"phoneMobile"})]),_:1})]),_:1})]),_:1}),t(r,{width:150,"data-field":"parentId",caption:"Jefe"},{default:n(()=>[t(d,{"data-source":s.jefe,"value-expr":"id","display-expr":"names"},null,8,["data-source"])]),_:1}),t(r,{width:150,"data-field":"customerId",caption:"Cliente"},{default:n(()=>[t(p),t(d,{"data-source":s.cliente,"value-expr":"id","display-expr":"name"},null,8,["data-source"])]),_:1}),t(r,{width:150,"data-field":"names",caption:"Nombres"},{default:n(()=>[t(p)]),_:1}),t(r,{width:150,"data-field":"lastName",caption:"Apellidos"}),t(r,{width:0,"data-field":"area",caption:"Area"},{default:n(()=>[t(d,{"data-source":s.area,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),t(r,{width:0,"data-field":"department",caption:"Departamento"},{default:n(()=>[t(d,{"data-source":s.department,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),t(r,{width:150,"data-field":"position",caption:"Posicion"},{default:n(()=>[t(d,{"data-source":s.position,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),t(r,{width:200,"data-field":"email",caption:"Correo Elect."},{default:n(()=>[t(p),t(N)]),_:1}),t(r,{width:0,"data-field":"phoneOffice",caption:"Telefono"},{default:n(()=>[t(p),t(D,{pattern:s.pattern,message:'El n\xFAmero de telefono debe tener el siguiente formato:  "(555) 555-5555" !'},null,8,["pattern"])]),_:1}),t(r,{width:0,"data-field":"phoneOfficeExt",caption:"Ext.","data-type":"number"}),t(r,{width:150,"data-field":"phoneMobile",caption:"Movil"},{default:n(()=>[t(D,{pattern:s.pattern,message:'El n\xFAmero de telefono debe tener el siguiente formato:  "(555) 555-5555" !'},null,8,["pattern"])]),_:1})]),_:1},8,["data-source","onExporting"])])])])])}var vt=st(ct,[["render",Dt]]);export{vt as default};
