import{D as v,a as P,b as E,c as F,d as T,e as N,f as G,g as k,h as V,i as A,j as q}from"./data-grid.24b081de.js";import{B}from"./BreadCrumb.9367f10a.js";import{D as M}from"./form.181df029.js";import{C as L}from"./index.3bbb47f2.js";import{R as g}from"./RepositoryFactory.1ead146f.js";import{r as o,o as z,a as j,c,f as a,w as d}from"./vendor.7710df40.js";import{_ as U}from"./index.7b655b97.js";const p=g.get("catalogs"),u=g.get("subsidiaries"),W=g.get("companies"),Y=await p.Get("NAME","COUNTRIES"),f=await p.Get("NAME","STATES"),y=await p.Get("NAME","CITY"),H=await p.Get("NAME","IDENTIFICATIONTYPE"),J=await W.GetWithPagination({});function O(t){return t!=null&&t!==""}const K={name:"SubsidiaryView",components:{DxDataGrid:v,DxColumn:P,DxScrolling:E,DxPager:F,DxPaging:T,DxEditing:N,DxRequiredRule:G,DxPopup:k,DxLookup:V,DxFilterRow:A,DxForm:q,DxItem:M,BreadCrumb:B},data(){return{dataSource:new L({key:"id",load:t=>{let e={};return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach(s=>{s in t&&O(t[s])&&(e[s]=JSON.stringify(t[s]))}),this.getSubsidiaries(e)},insert:t=>this.createSubsidiary(t),update:(t,e)=>(e.id=t,this.updateSubsidiary(e)),remove:t=>this.deleteSubsidiary(t)}),country:Y.data.data,state:f.data.data,city:y.data.data,company:J.data.data,catalogTypes:H.data.data,setCountryValue(t,e){t.catalogRegionStateId=null,t.catalogRegionCityId=null,this.defaultSetCellValue(t,e)},setStateValue(t,e){t.catalogRegionCityId=null,this.defaultSetCellValue(t,e)}}},methods:{onEditorPreparing(t){t.parentType==="dataRow"&&t.dataField},getFilteredStates:t=>({store:f.data.data,filter:t.data?["parentId","=",t.data.catalogRegionCountryId]:null}),getFilteredCities:t=>({store:y.data.data,filter:t.data?["parentId","=",t.data.catalogRegionStateId]:null}),getSubsidiaries:async function(t){const{data:e}=await u.GetWithFilter(t);return e.data},createSubsidiary:async function(t){const{data:e}=await u.Create(t);return e},updateSubsidiary:async function(t){const{data:e}=await u.Update(t);return e},deleteSubsidiary:async function(t){const{data:e}=await u.Delete(t);return e}}},Q={id:"main-content"},X={class:"container-fluid"},Z={class:"block-header"},$={class:"row clearfix"},tt={class:"col-md-12"};function at(t,e,s,et,n,m){const x=o("bread-crumb"),D=o("DxFilterRow"),h=o("DxScrolling"),w=o("DxPaging"),I=o("DxPager"),S=o("DxPopup"),i=o("DxItem"),C=o("DxForm"),b=o("DxEditing"),r=o("DxColumn"),l=o("DxLookup"),_=o("DxRequiredRule"),R=o("DxDataGrid");return z(),j("div",Q,[c("div",X,[c("div",Z,[a(x)]),c("div",$,[c("div",tt,[a(R,{id:"dataGridSubsidiary","data-source":n.dataSource,"show-borders":!0,"repaint-changes-only":!0,"remote-operations":!0,"key-expr":"id",onEditorPreparing:m.onEditorPreparing},{default:d(()=>[a(D,{visible:!0}),a(h,{"row-rendering-mode":"virtual"}),a(w,{"page-size":10}),a(I,{visible:!0,"allowed-page-sizes":[10,20,50],"display-mode":t.displayMode,"show-page-size-selector":!0,"show-info":!1,"show-navigation-buttons":!0},null,8,["display-mode"]),a(b,{"refresh-mode":t.full,"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,mode:"popup"},{default:d(()=>[a(S,{"show-title":!0,width:700,height:525,title:"Subsidiary Info"}),a(C,null,{default:d(()=>[a(i,{"col-count":1,"col-span":2,"item-type":"group"},{default:d(()=>[a(i,{"data-field":"name"}),a(i,{"data-field":"catalogTypeId"}),a(i,{"data-field":"numberId"}),a(i,{"data-field":"companyId"}),a(i,{"data-field":"pctPartIndrctCommissions"})]),_:1}),a(i,{"col-count":2,"col-span":2,"item-type":"group",caption:"Home Address"},{default:d(()=>[a(i,{"data-field":"catalogRegionCountryId"}),a(i,{"data-field":"catalogRegionStateId"}),a(i,{"data-field":"catalogRegionCityId"}),a(i,{"data-field":"address"})]),_:1})]),_:1})]),_:1},8,["refresh-mode"]),a(r,{width:150,"data-field":"numberId","data-type":"number",caption:"No. Identificaci\xF3n"}),a(r,{width:0,"data-field":"catalogTypeId",caption:"Tipo Identificaci\xF3n"},{default:d(()=>[a(l,{"data-source":n.catalogTypes,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),a(r,{width:150,"data-field":"name",caption:"Nombre"},{default:d(()=>[a(_)]),_:1}),a(r,{width:150,"data-field":"companyId",caption:"Empresa"},{default:d(()=>[a(_),a(l,{"data-source":n.company,"value-expr":"id","display-expr":"name"},null,8,["data-source"])]),_:1}),a(r,{width:150,"set-cell-value":n.setCountryValue,"data-type":"string","data-field":"catalogRegionCountryId",caption:"Pa\xEDs"},{default:d(()=>[a(l,{"data-source":n.country,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1},8,["set-cell-value"]),a(r,{width:150,"set-cell-value":n.setStateValue,"data-field":"catalogRegionStateId","data-type":"string",caption:"Estado"},{default:d(()=>[a(l,{"data-source":m.getFilteredStates,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1},8,["set-cell-value"]),a(r,{width:150,"data-field":"catalogRegionCityId","data-type":"string",caption:"Ciudad"},{default:d(()=>[a(l,{"data-source":m.getFilteredCities,"value-expr":"id","display-expr":"value"},null,8,["data-source"])]),_:1}),a(r,{width:150,"data-field":"address",caption:"Direcci\xF3n"}),a(r,{width:300,"data-field":"pctPartIndrctCommissions",caption:"Porcentaje de Participacion Indirecta","data-type":"number"})]),_:1},8,["data-source","onEditorPreparing"])])])])])}var ct=U(K,[["render",at]]);export{ct as default};
